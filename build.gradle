group 'com.github.blindpirate'
version '0.0.1-SNAPSHOT'


apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'idea'
apply plugin: 'findbugs'
apply plugin: 'checkstyle'
apply plugin: 'jacoco'

sourceCompatibility = 1.7

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    compile gradleApi()
    compile group: 'com.google.inject', name: 'guice', version: '4.1.0'
    compile 'org.codehaus.groovy:groovy-all:2.4.7'
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.5'
    compile group: 'commons-io', name: 'commons-io', version: '2.5'
    compile 'com.google.guava:guava:20.0'
    compile 'com.github.zafarkhaja:java-semver:0.9.0'
    compile group: 'org.eclipse.jgit', name: 'org.eclipse.jgit', version: '4.5.0.201609210915-r'
    compile group: 'org.jsoup', name: 'jsoup', version: '1.7.2'
    compile group: 'com.alibaba', name: 'fastjson', version: '1.2.21'
    testCompile group: 'junit', name: 'junit', version: '4.11'
    testCompile group: 'org.mockito', name: 'mockito-all', version: '1.10.19'
    testCompile group: 'net.lingala.zip4j', name: 'zip4j', version: '1.3.2'
}

test {
    if (gradle.startParameter.isOffline()) {
        System.setProperty("TEST_ARE_OFFLINE", 'true')
    }
}

checkstyle {
    toolVersion = '6.7'
}

checkstyleTest {
    enabled = false
}

tasks.withType(FindBugs) {
    reports {
        xml.enabled false
        html.enabled true
    }
}
findbugs {
    excludeFilter = file("$rootProject.projectDir/config/findbugs/excludeClosure.xml")
}


task wrapper(type: Wrapper) {
    gradleVersion = '3.2'
}

